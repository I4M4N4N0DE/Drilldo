import{_ as y,a as I,s as b,o as m,c as f,b as t,w as h,v as x,d as u,k as S,p as $,h as k,u as q,Q as g,A as V,F as A,j as N,f as Q,e as U,g as E}from"./index-ff5dabe8.js";import{Q as j}from"./QuestionControlComponent-409f169a.js";const M=a=>($("data-v-f27aa79d"),a=a(),k(),a),B={class:"answer-editor"},L={class:"delete-answer"},O=M(()=>t("span",{class:"but-text"},"X",-1)),D=[O],J={class:"correct-selection"},F=M(()=>t("span",null,"Correct",-1)),T={__name:"ModifyAnswerComponent",props:["answerId"],setup(a){const s=a,n=I(),{editQuestion:d}=b(n);function r(){const o=d.value.answers.findIndex(c=>c.id===s.answerId);d.value.answers.splice(o,1)}return(o,c)=>(m(),f("div",B,[t("div",L,[t("button",{class:"button red",onClick:c[0]||(c[0]=_=>r())},D)]),h(t("input",{type:"textbox",name:"title","onUpdate:modelValue":c[1]||(c[1]=_=>u(d).answers.find(w=>w.id===s.answerId).text=_),placeholder:"edit me"},null,512),[[x,u(d).answers.find(_=>_.id===s.answerId).text]]),t("div",J,[F,h(t("input",{type:"checkbox","onUpdate:modelValue":c[2]||(c[2]=_=>u(d).answers.find(w=>w.id===s.answerId).correct=_)},null,512),[[S,u(d).answers.find(_=>_.id===s.answerId).correct]])])]))}},X=y(T,[["__scopeId","data-v-f27aa79d"]]);const R=a=>($("data-v-3f9498b0"),a=a(),k(),a),z={class:"question"},G={class:"question-data"},H={class:"answers"},K={class:"buttons"},P=R(()=>t("span",{class:"but-text"},"Save question",-1)),W=[P],Y=R(()=>t("span",{class:"but-text"},"Add answer",-1)),Z=[Y],ee={__name:"ModifyQuestionComponent",props:["questionId"],setup(a){const s=a,n=q(g),d=q(V),r=I();r.editQuestion=r.questions[r.index];const{editQuestion:o}=b(r);function c(){const l=n.find(o.value.id).number,e=n.where("number",Number(o.value.number)).first();o.value.number<1?n.where("number",1).first()===null&&(o.value.number=1):e!==null&&(o.value.number=l)}function _(){o.value.answers=o.value.answers.concat(d.make({questionId:s.questionId}))}function w(){c(),d.where("questionId",s.questionId).delete(),n.save(o.value)}return(l,e)=>(m(),f("div",z,[t("div",G,[h(t("input",{type:"number",name:"number","onUpdate:modelValue":e[0]||(e[0]=i=>u(o).number=i)},null,512),[[x,u(o).number]]),h(t("input",{type:"text",name:"title","onUpdate:modelValue":e[1]||(e[1]=i=>u(o).question=i)},null,512),[[x,u(o).question]])]),t("div",H,[(m(!0),f(A,null,N(u(o).answers,i=>(m(),Q(X,{answerId:i.id,key:i.id},null,8,["answerId"]))),128))]),t("div",K,[t("button",{class:"button",onClick:e[2]||(e[2]=i=>w())},W),t("button",{class:"button green",onClick:e[3]||(e[3]=i=>_())},Z)])]))}},te=y(ee,[["__scopeId","data-v-3f9498b0"]]);const C=a=>($("data-v-e3810e37"),a=a(),k(),a),se={class:"explore-container"},ne={class:"edit-controls"},oe={class:"question-buttons"},ie=C(()=>t("span",{class:"but-text"},"Delete question",-1)),ae=[ie],de=C(()=>t("span",{class:"but-text"},"Download questions",-1)),ue=[de],re=C(()=>t("span",{class:"but-text"},"Add question",-1)),le=[re],ce={__name:"EditView",setup(a){const s=q(g),n=I();s.where("showResults",!1).update({showResults:!1}),n.index=0,n.showMobileMenu=!1,n.viewMode=!1,n.editMode=!0,n.questions=s.with("answers").get(),s.all().length===0&&(n.questions=[s.make()]);const{index:d}=b(n),{questions:r}=b(n);function o(){const l=Math.max(...r.value.map(e=>e.number))+1;r.value.push(s.make({number:l}))}function c(){s.destroy(r.value[d.value].id),r.value.splice(d.value,1),n.previous(),s.all().length===0&&(n.questions=[s.make()])}function _(){let l=JSON.parse(JSON.stringify(s.with("answers").get()));l.forEach(function(e,i){e.answers.forEach(function(v,p){e.answers[p]={text:v.text,correct:v.correct}}),l[i]={number:e.number,question:e.question,answers:e.answers}}),l=l.sort((e,i)=>e.number-i.number),w(JSON.stringify(l,null,2),"text/json","questions.json")}function w(l,e,i){var v=new Blob([l],{type:e}),p=document.createElement("a");p.download=i,p.href=URL.createObjectURL(v),p.dataset.downloadurl=[e,p.download,p.href].join(":"),p.style.display="none",document.body.appendChild(p),p.click(),document.body.removeChild(p),setTimeout(function(){URL.revokeObjectURL(p.href)},1500)}return(l,e)=>(m(),f("div",se,[u(n).questions.length>=1?(m(),Q(te,{questionId:u(r)[u(d)].id,key:u(r)[u(d)].id},null,8,["questionId"])):U("",!0),t("div",ne,[t("div",oe,[t("button",{class:"button red",onClick:e[0]||(e[0]=i=>c())},ae),t("button",{class:"button",onClick:e[1]||(e[1]=i=>_())},ue),t("button",{class:"button green",onClick:e[2]||(e[2]=i=>o())},le)]),E(j)])]))}},we=y(ce,[["__scopeId","data-v-e3810e37"]]);export{we as default};
