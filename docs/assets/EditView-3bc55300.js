import{_ as I,u as h,Q as g,A as V}from"./UploadJsonComponent-f26af479.js";import{u as y,s as f,o as w,c as b,a as t,V as x,b as u,p as $,g as k,T as R,U as A,S as M,e as U,d as E}from"./viewer-56c5588e.js";import{v as q,b as N}from"./index-48c4a603.js";import{Q as j}from"./QuestionControlComponent-7842cdbb.js";const Q=o=>($("data-v-f27aa79d"),o=o(),k(),o),B={class:"answer-editor"},L={class:"delete-answer"},O=Q(()=>t("span",{class:"but-text"},"X",-1)),D=[O],J={class:"correct-selection"},T=Q(()=>t("span",null,"Correct",-1)),F={__name:"ModifyAnswerComponent",props:["answerId"],setup(o){const s=o,i=y(),{editQuestion:a}=f(i);function r(){const d=a.value.answers.findIndex(l=>l.id===s.answerId);a.value.answers.splice(d,1)}return(d,l)=>(w(),b("div",B,[t("div",L,[t("button",{class:"button red",onClick:l[0]||(l[0]=c=>r())},D)]),x(t("input",{type:"textbox",name:"title","onUpdate:modelValue":l[1]||(l[1]=c=>u(a).answers.find(v=>v.id===s.answerId).text=c),placeholder:"edit me"},null,512),[[q,u(a).answers.find(c=>c.id===s.answerId).text]]),t("div",J,[T,x(t("input",{type:"checkbox","onUpdate:modelValue":l[2]||(l[2]=c=>u(a).answers.find(v=>v.id===s.answerId).correct=c)},null,512),[[N,u(a).answers.find(c=>c.id===s.answerId).correct]])])]))}},X=I(F,[["__scopeId","data-v-f27aa79d"]]);const S=o=>($("data-v-6b7f984c"),o=o(),k(),o),z={class:"question"},G={class:"question-data"},H={class:"answers"},K={class:"buttons"},P=S(()=>t("span",{class:"but-text"},"Save question",-1)),W=[P],Y=S(()=>t("span",{class:"but-text"},"Add answer",-1)),Z=[Y],ee={__name:"ModifyQuestionComponent",props:["questionId"],setup(o){const s=o,i=h(g),a=h(V),r=y();r.editQuestion=r.questions[r.index];const{editQuestion:d}=f(r);function l(){d.value.number<1&&(d.value.number=1)}function c(){d.value.answers=d.value.answers.concat(a.make({questionId:s.questionId}))}function v(){a.where("questionId",s.questionId).delete(),i.save(d.value)}return(p,e)=>(w(),b("div",z,[t("div",G,[x(t("input",{type:"number",name:"number","onUpdate:modelValue":e[0]||(e[0]=n=>u(d).number=n),onInput:e[1]||(e[1]=n=>l())},null,544),[[q,u(d).number]]),x(t("input",{type:"text",name:"title","onUpdate:modelValue":e[2]||(e[2]=n=>u(d).question=n)},null,512),[[q,u(d).question]])]),t("div",H,[(w(!0),b(R,null,A(u(d).answers,n=>(w(),M(X,{answerId:n.id,key:n.id},null,8,["answerId"]))),128))]),t("div",K,[t("button",{class:"button",onClick:e[3]||(e[3]=n=>v())},W),t("button",{class:"button green",onClick:e[4]||(e[4]=n=>c())},Z)])]))}},te=I(ee,[["__scopeId","data-v-6b7f984c"]]);const C=o=>($("data-v-389c25cc"),o=o(),k(),o),se={class:"explore-container"},ne={class:"edit-controls"},oe={class:"question-buttons"},ie=C(()=>t("span",{class:"but-text"},"Delete question",-1)),de=[ie],ae=C(()=>t("span",{class:"but-text"},"Download questions",-1)),ue=[ae],re=C(()=>t("span",{class:"but-text"},"Add question",-1)),le=[re],ce={__name:"EditView",setup(o){const s=h(g),i=y();s.where("showResults",!1).update({showResults:!1}),i.index=0,i.showMobileMenu=!1,i.viewMode=!1,i.editMode=!0,i.questions=s.with("answers").get(),s.all().length===0&&(i.questions=[s.make()]);const{index:a}=f(i),{questions:r}=f(i);function d(){const p=Math.max(...r.value.map(e=>e.number))+1;r.value.push(s.make({number:p}))}function l(){s.destroy(r.value[a.value].id),r.value.splice(a.value,1),i.previous(),s.all().length===0&&(i.questions=[s.make()])}function c(){let p=JSON.parse(JSON.stringify(s.with("answers").get()));p.forEach(function(e,n){e.answers.forEach(function(m,_){e.answers[_]={text:m.text,correct:m.correct}}),p[n]={number:e.number,question:e.question,answers:e.answers}}),p=p.sort((e,n)=>e.number-n.number),v(JSON.stringify(p,null,2),"text/json","questions.json")}function v(p,e,n){var m=new Blob([p],{type:e}),_=document.createElement("a");_.download=n,_.href=URL.createObjectURL(m),_.dataset.downloadurl=[e,_.download,_.href].join(":"),_.style.display="none",document.body.appendChild(_),_.click(),document.body.removeChild(_),setTimeout(function(){URL.revokeObjectURL(_.href)},1500)}return(p,e)=>(w(),b("div",se,[u(i).questions.length>=1?(w(),M(te,{questionId:u(r)[u(a)].id,key:u(r)[u(a)].id},null,8,["questionId"])):U("",!0),t("div",ne,[t("div",oe,[t("button",{class:"button red",onClick:e[0]||(e[0]=n=>l())},de),t("button",{class:"button",onClick:e[1]||(e[1]=n=>c())},ue),t("button",{class:"button green",onClick:e[2]||(e[2]=n=>d())},le)]),E(j)])]))}},me=I(ce,[["__scopeId","data-v-389c25cc"]]);export{me as default};
