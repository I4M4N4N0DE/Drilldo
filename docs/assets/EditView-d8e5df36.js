import{_ as I,a as $,s as b,o as w,c as f,b as t,w as h,v as q,d as u,k as S,p as k,h as C,u as y,Q as g,A as V,F as A,j as N,f as Q,e as E,g as U}from"./index-9d402c3d.js";import{Q as j}from"./QuestionControlComponent-4df07f1c.js";const M=d=>(k("data-v-f27aa79d"),d=d(),C(),d),B={class:"answer-editor"},L={class:"delete-answer"},O=M(()=>t("span",{class:"but-text"},"X",-1)),D=[O],J={class:"correct-selection"},F=M(()=>t("span",null,"Correct",-1)),T={__name:"ModifyAnswerComponent",props:["answerId"],setup(d){const s=d,n=$(),{editQuestion:a}=b(n);function r(){const o=a.value.answers.findIndex(c=>c.id===s.answerId);a.value.answers.splice(o,1)}return(o,c)=>(w(),f("div",B,[t("div",L,[t("button",{class:"button red",onClick:c[0]||(c[0]=_=>r())},D)]),h(t("input",{type:"textbox",name:"title","onUpdate:modelValue":c[1]||(c[1]=_=>u(a).answers.find(v=>v.id===s.answerId).text=_),placeholder:"edit me"},null,512),[[q,u(a).answers.find(_=>_.id===s.answerId).text]]),t("div",J,[F,h(t("input",{type:"checkbox","onUpdate:modelValue":c[2]||(c[2]=_=>u(a).answers.find(v=>v.id===s.answerId).correct=_)},null,512),[[S,u(a).answers.find(_=>_.id===s.answerId).correct]])])]))}},X=I(T,[["__scopeId","data-v-f27aa79d"]]);const R=d=>(k("data-v-b6fd7cd4"),d=d(),C(),d),z={class:"question"},G={class:"question-data"},H={class:"answers"},K={class:"buttons"},P=R(()=>t("span",{class:"but-text"},"Save question",-1)),W=[P],Y=R(()=>t("span",{class:"but-text"},"Add answer",-1)),Z=[Y],ee={__name:"ModifyQuestionComponent",props:["questionId"],setup(d){const s=d,n=y(g),a=y(V),r=$();r.editQuestion=r.questions[r.index];const{editQuestion:o}=b(r);function c(){const l=n.find(o.value.id).number,e=n.where("number",Number(o.value.number)).first();o.value.number<1?n.where("number",1).first()===null&&(o.value.number=1):e!==null&&(o.value.number=l)}function _(){o.value.answers=o.value.answers.concat(a.make({questionId:s.questionId}))}function v(){c(),a.where("questionId",s.questionId).delete(),n.save(o.value)}return(l,e)=>(w(),f("div",z,[t("div",G,[h(t("input",{type:"number",name:"number","onUpdate:modelValue":e[0]||(e[0]=i=>u(o).number=i)},null,512),[[q,u(o).number]]),h(t("input",{type:"text",name:"title","onUpdate:modelValue":e[1]||(e[1]=i=>u(o).question=i)},null,512),[[q,u(o).question]])]),t("div",H,[(w(!0),f(A,null,N(u(o).answers,i=>(w(),Q(X,{answerId:i.id,key:i.id},null,8,["answerId"]))),128))]),t("div",K,[t("button",{class:"button",onClick:e[2]||(e[2]=i=>v())},W),t("button",{class:"button green",onClick:e[3]||(e[3]=i=>_())},Z)])]))}},te=I(ee,[["__scopeId","data-v-b6fd7cd4"]]);const x=d=>(k("data-v-6d67c1aa"),d=d(),C(),d),se={class:"edit"},ne=x(()=>t("h1",null,"Edit question sets",-1)),oe={class:"edit-container"},ie={class:"edit-controls"},de={class:"question-buttons"},ae=x(()=>t("span",{class:"but-text"},"Delete question",-1)),ue=[ae],re=x(()=>t("span",{class:"but-text"},"Download questions",-1)),le=[re],ce=x(()=>t("span",{class:"but-text"},"Add question",-1)),_e=[ce],pe={__name:"EditView",setup(d){const s=y(g),n=$();s.where("showResults",!1).update({showResults:!1}),n.index=0,n.showMobileMenu=!1,n.viewMode=!1,n.editMode=!0,n.questions=s.with("answers").get(),s.all().length===0&&(n.questions=[s.make()]);const{index:a}=b(n),{questions:r}=b(n);function o(){const l=Math.max(...r.value.map(e=>e.number))+1;r.value.push(s.make({number:l}))}function c(){s.destroy(r.value[a.value].id),r.value.splice(a.value,1),n.previous(),s.all().length===0&&(n.questions=[s.make()])}function _(){let l=JSON.parse(JSON.stringify(s.with("answers").get()));l.forEach(function(e,i){e.answers.forEach(function(m,p){e.answers[p]={text:m.text,correct:m.correct}}),l[i]={number:e.number,question:e.question,answers:e.answers}}),l=l.sort((e,i)=>e.number-i.number),v(JSON.stringify(l,null,2),"text/json","questions.json")}function v(l,e,i){var m=new Blob([l],{type:e}),p=document.createElement("a");p.download=i,p.href=URL.createObjectURL(m),p.dataset.downloadurl=[e,p.download,p.href].join(":"),p.style.display="none",document.body.appendChild(p),p.click(),document.body.removeChild(p),setTimeout(function(){URL.revokeObjectURL(p.href)},1500)}return(l,e)=>(w(),f("div",se,[ne,t("div",oe,[u(n).questions.length>=1?(w(),Q(te,{questionId:u(r)[u(a)].id,key:u(r)[u(a)].id},null,8,["questionId"])):E("",!0),t("div",ie,[t("div",de,[t("button",{class:"button red",onClick:e[0]||(e[0]=i=>c())},ue),t("button",{class:"button",onClick:e[1]||(e[1]=i=>_())},le),t("button",{class:"button green",onClick:e[2]||(e[2]=i=>o())},_e)]),U(j)])])]))}},me=I(pe,[["__scopeId","data-v-6d67c1aa"]]);export{me as default};
